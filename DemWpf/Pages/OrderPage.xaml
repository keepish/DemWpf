<Page x:Class="DemWpf.Pages.OrderPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:m="clr-namespace:DemWpf.Models"
      Title="Заказы">

	<Grid>
		<Grid.RowDefinitions>
			<RowDefinition Height="Auto"/>
			<RowDefinition Height="Auto"/>
			<RowDefinition/>
		</Grid.RowDefinitions>

		<StackPanel Orientation="Horizontal" Margin="10" HorizontalAlignment="Right">
			<TextBlock x:Name="UserNameText" VerticalAlignment="Center"/>
			<Image Source="/Icon.png" Height="40"/>
		</StackPanel>

		<StackPanel Orientation="Horizontal" Margin="10" HorizontalAlignment="Left">
			<Button Content="Назад" Width="150" Margin="5" Click="LogOut_Click"/>
			<Button x:Name="AddOrderButton" Content="Добавить заказ" Width="150" Margin="5" Click="AddOrder_Click"/>
		</StackPanel>

		<ListView x:Name="OrdersListView"
                  Grid.Row="2"
                  HorizontalContentAlignment="Stretch"
                  MouseDoubleClick="OrdersListView_MouseDoubleClick">
			
			<ListView.ItemTemplate>
				<DataTemplate DataType="m:Order">
					<Border BorderBrush="Black" BorderThickness="2" Margin="5">
						<Grid>
							<Grid.ColumnDefinitions>
								<ColumnDefinition/>
								<ColumnDefinition Width="200"/>
							</Grid.ColumnDefinitions>

							<StackPanel Margin="10">
								<TextBlock FontSize="16" FontWeight="Bold">
									<Run Text="Артикул заказа:"/>
									<Run Text="{Binding OrderedProducts[0].Product.Article}"/>
								</TextBlock>

								<TextBlock>
									<Run Text="Статус заказа: "/>
									<Run Text="{Binding Status}"/>
								</TextBlock>

								<TextBlock>
									<Run Text="Адрес пункта выдачи: "/>
									<Run Text="{Binding PickUpPoint.Address}"/>
								</TextBlock>
								
								<TextBlock>
									<Run Text="Дата заказа: "/>
									<Run Text="{Binding OrderDate, StringFormat={}{0:dd.MM.yyyy}}"/>
								</TextBlock>

							</StackPanel>
							<Border Grid.Column="1" BorderBrush="Black" BorderThickness="2" Margin="10">
								<StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
									<TextBlock FontSize="18" FontWeight="Bold"
                                               Text="{Binding DeliveryDate, StringFormat={}{0:dd.MM.yyyy}}"
                                               TextAlignment="Center"
                                               TextWrapping="Wrap"/>
								</StackPanel>
							</Border>
						</Grid>
					</Border>
				</DataTemplate>
			</ListView.ItemTemplate>
		</ListView>
	</Grid>
</Page>
